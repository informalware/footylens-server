package com.informalware.footylens.routes

import com.informalware.footylens.data.Team
import com.informalware.footylens.data.mocks.getTeam

import io.ktor.http.*
import io.ktor.server.application.*
import io.ktor.server.request.*
import io.ktor.server.response.*
import io.ktor.server.routing.*


fun Application.teamRoutes() {
    routing {
        get("/team/{id}") {
            call.parameters["id"]?.let {id ->
                when (val team = getTeam(id.toUInt())) {
                    is Team -> {
                        call.respond(team)
                    }
                    null -> call.respond(HttpStatusCode.NotFound, mapOf("error" to "$id is not a team"))
                }
            }
        }
    }
}