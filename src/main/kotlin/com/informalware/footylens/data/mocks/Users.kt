package com.informalware.footylens.data.mocks

import com.informalware.footylens.data.User

private val Users = mutableListOf(
    User("ojarrisonn_", "flamengo123", "Harrisonn", "jh@ps.com", "Flamengo e Barcelona", listOf("duvanel", "leomessi", "lilgabi"), listOf(0u, 1u)),
    User("duvanel", "manualminoxi", "T.Duvanel", "thduva@ps.com", "Sou calvo", listOf("ojarrisonn_", "lilgabi")),
    User("leomessi", "cirothiagomateo", "Messi", "messi@barca.es", "8 balones de oro", listOf("ojarrisonn_")),
    User("lilgabi", "pescoco123", "Gabigol", "lilgabi@hotmail.com", "Pescoço", listOf("ojarrisonn_", "duvanel"))
)

/**
 * Obtem um usuário da lista de usuários mockados
 * @param username nome do usuário desejado
 * @return objeto do usuário ou `null` caso o usuário não exista
 * */
fun getUserById(username: String): User? =
    Users.filter { it.username == username }
         .getOrNull(0)

fun getUserFollowedBy(username: String): List<String> =
    Users.filter { user -> user.followingList.contains(username) }
        .map { user -> user.username }


/**
 * Adiciona um usuário no registro se seu id for único
 * @param user usuário a ser registrado
 * @return `true` se o registro foi bem sucedido
 * */
fun registerUser(user: User): Boolean =
    if (Users.any { it.username == user.username }) {
        false
    } else {
        Users.add(user)
        true
    }